(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12d0e554"],{2375:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"wraper"},[a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div")])])}],s=(a("616f"),a("2877")),i={},c=Object(s["a"])(i,r,n,!1,null,"4548c6d4",null);t["a"]=c.exports},"50ff":function(e,t,a){},"616f":function(e,t,a){"use strict";var r=a("50ff"),n=a.n(r);n.a},6783:function(e,t,a){"use strict";a("a4d3"),a("e01a");var r=a("2fa3");t["a"]={getTweets:function(){return r["b"].get("/tweets")},createTweet:function(e){var t=e.description;return r["b"].post("/tweets",{description:t})},replyTweet:function(e){var t=e.tweetId,a=e.comment;return r["b"].post("/tweets/".concat(t,"/replies"),{comment:a})},getTweet:function(e){var t=e.tweetId;return r["b"].get("/tweets/".concat(t))},getTweetReplies:function(e){var t=e.tweetId;return r["b"].get("/tweets/".concat(t,"/replies"))},addLike:function(e){var t=e.tweetId;return r["b"].post("/tweets/".concat(t,"/like"),null)},deleteLike:function(e){var t=e.tweetId;return r["b"].post("/tweets/".concat(t,"/unlike"),null)}}},"8d93":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tweet-create-modal"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-box"},[a("div",{staticClass:"cancel-create"},[a("img",{staticClass:"cancel-icon",attrs:{src:"https://i.imgur.com/qd4MrVa.png",alt:"cancel"},on:{click:e.clickToClose}})]),a("div",{staticClass:"tweet-create-container"},[a("div",{staticClass:"profile-image"},[a("img",{staticClass:"user-img",attrs:{src:e._f("emptyImage")(this.currentUserData.avatar),alt:""}})]),a("form",{staticClass:"tweet-input"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"tweet-input-content",attrs:{name:"tweet-input-area",id:"",cols:"30",rows:"10",placeholder:"有什麼新鮮事？"},domProps:{value:e.description},on:{keydown:e.autoTextAreaHeight,input:function(t){t.target.composing||(e.description=t.target.value)}}}),a("button",{staticClass:"tweet-create-btn",attrs:{type:"submit"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[e._v(" 推文 ")])])])])])])},n=[],s=(a("a4d3"),a("e01a"),a("5530")),i=a("2f62"),c=a("2708"),o={mixins:[c["a"]],props:{initialDescription:{type:String,required:!0},currentUserData:{type:Object,default:function(){}}},computed:Object(s["a"])({},Object(i["b"])(["currentUser"])),data:function(){return{description:this.initialDescription}},methods:{clickToClose:function(){this.$emit("after-click-close-create")},handleSubmit:function(){var e=this.description;console.log(e),this.$emit("afterSubmit",e)},finishCreate:function(){this.$emit("after-click-close-create")},autoTextAreaHeight:function(e){e.currentTarget.scrollHeight>e.currentTarget.clientHeight&&(e.currentTarget.style.height=e.currentTarget.scrollHeight+"px")}}},u=o,l=(a("f19b"),a("2877")),d=Object(l["a"])(u,r,n,!1,null,"73aee90c",null);t["a"]=d.exports},"8ebf":function(e,t,a){},"9b49":function(e,t,a){},"9bb1":function(e,t,a){"use strict";var r=a("8ebf"),n=a.n(r);n.a},c766:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.isLoading?a("Spinner"):e._e(),a("Sidebar",{attrs:{selectedPage:e.selectedPage},on:{showCreateModal:e.showCreateModal}}),a("div",{staticClass:"account-setting"},[a("div",{staticClass:"account-setting-container"},[e._m(0),a("div",{staticClass:"form-part"},[a("form",{staticClass:"login-form",attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[a("div",{staticClass:"form-label-group"},[a("label",{staticClass:"form-label",attrs:{for:"account"}},[e._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"form-input",attrs:{type:"text",name:"account",required:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),a("div",{staticClass:"form-label-group"},[a("label",{staticClass:"form-label",attrs:{for:"name"}},[e._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-input",attrs:{type:"text",name:"name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),a("div",{staticClass:"form-label-group"},[a("label",{staticClass:"form-label",attrs:{for:"account"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-input",attrs:{type:"email",name:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),a("div",{staticClass:"form-label-group"},[a("label",{staticClass:"form-label",attrs:{for:"password"}},[e._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-input",attrs:{type:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("div",{staticClass:"form-label-group"},[a("label",{staticClass:"form-label",attrs:{for:"password-check"}},[e._v("密碼確認")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkPassword,expression:"checkPassword"}],staticClass:"form-input",attrs:{type:"password",name:"checkPassword"},domProps:{value:e.checkPassword},on:{input:function(t){t.target.composing||(e.checkPassword=t.target.value)}}})]),a("button",{staticClass:"btn login-btn",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"儲存中":"儲存")+" ")])])])])]),e.createModal?a("TweetCreateModal",{attrs:{"initial-description":e.description,currentUserData:e.currentUserData},on:{"after-click-close-create":e.closeCreateModal,afterSubmit:e.creatTweetFromModal}}):e._e()],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting-title"},[a("p",[e._v("帳號設定")])])}],s=(a("b0c0"),a("96cf"),a("1da1")),i=a("5530"),c=a("5ea5"),o=a("8d93"),u=a("6783"),l=a("4cce"),d=a("2fa3"),m=a("2f62"),p=a("2375"),f={components:{Sidebar:c["a"],TweetCreateModal:o["a"],Spinner:p["a"]},computed:Object(i["a"])({},Object(m["b"])(["currentUser"])),data:function(){return{createModal:!1,selectedPage:"setting",id:"",account:"",name:"",email:"",password:"",checkPassword:"",isProcessing:!1,isLoading:!1,currentUserData:{id:"",name:"",account:"",avatar:""}}},created:function(){this.fetchUserData(this.currentUser.id),this.fetchCurrentUserData(this.currentUser.id)},methods:{showCreateModal:function(){this.createModal=!0},closeCreateModal:function(){this.createModal=!1},CreateFinish:function(){this.$router.push({name:"tweets-home"})},fetchUserData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,l["a"].getUser({userId:e});case 4:r=a.sent,n=r.data,s=n.account,i=n.name,c=n.email,t.id=e,t.account=s,t.name=i,t.email=c,t.isLoading=!1,a.next=19;break;case 14:a.prev=14,a.t0=a["catch"](0),console.log(a.t0),d["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"}),t.isLoading=!1;case 19:case"end":return a.stop()}}),a,null,[[0,14]])})))()},fetchCurrentUserData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l["a"].getUser({userId:e});case 2:r=a.sent,n=r.data,s=n.account,i=n.name,c=n.avatar,t.currentUserData.account=s,t.currentUserData.name=i,t.currentUserData.avatar=c;case 8:case"end":return a.stop()}}),a)})))()},handleSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isProcessing=!0,!(e.account.length>15)){t.next=6;break}return d["a"].fire({icon:"warning",title:"帳號限定使用15個字"}),e.isProcessing=!1,t.abrupt("return");case 6:if(!(e.name.length>50)){t.next=10;break}return d["a"].fire({icon:"warning",title:"名字限定使用50個字"}),e.isProcessing=!1,t.abrupt("return");case 10:if(e.account&&e.name&&e.email){t.next=14;break}return d["a"].fire({icon:"warning",title:"您有漏填的欄位喔！"}),e.isProcessing=!1,t.abrupt("return");case 14:if(e.password===e.checkPassword){t.next=18;break}return d["a"].fire({icon:"warning",title:"密碼與確認密碼不符"}),e.isProcessing=!1,t.abrupt("return");case 18:return a=e.id,r={account:e.account,name:e.name,email:e.email,password:e.password,checkPassword:e.checkPassword},t.next=22,l["a"].updateInfo({userId:a,formData:r});case 22:if(n=t.sent,s=n.data,"success"===s.status){t.next=42;break}if("Account repeated."!==s.message){t.next=31;break}return d["a"].fire({icon:"error",title:"此帳號已被使用！"}),e.isProcessing=!1,t.abrupt("return");case 31:if("Email repeated."!==s.message){t.next=37;break}return d["a"].fire({icon:"error",title:"此信箱已被使用！"}),e.isProcessing=!1,t.abrupt("return");case 37:if("Email and account repeated."!==s.message){t.next=41;break}return d["a"].fire({icon:"error",title:"帳號及信箱已被使用！"}),e.isProcessing=!1,t.abrupt("return");case 41:throw new Error(s.message);case 42:d["a"].fire({icon:"success",title:"儲存完成"}),e.isProcessing=!1,t.next=51;break;case 46:t.prev=46,t.t0=t["catch"](0),console.log(t.t0),d["a"].fire({icon:"error",title:"無法儲存資料，請稍後再試"}),e.isProcessing=!1;case 51:case"end":return t.stop()}}),t,null,[[0,46]])})))()},creatTweetFromModal:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,0!==e.length){a.next=4;break}return d["a"].fire({icon:"warning",title:"請輸入推文內容"}),a.abrupt("return");case 4:if(!(e.length>140)){a.next=7;break}return d["a"].fire({icon:"warning",title:"推文字數限制140字以內，請減少輸入的字數"}),a.abrupt("return");case 7:return a.next=9,u["a"].createTweet({description:e});case 9:if(r=a.sent,n=r.data,"error"!==n.status){a.next=13;break}throw new Error(n.message);case 13:t.CreateFinish(),a.next=20;break;case 16:a.prev=16,a.t0=a["catch"](0),console.log(a.t0),d["a"].fire({icon:"error",title:"無法新增推文，請稍後再試看"});case 20:case"end":return a.stop()}}),a,null,[[0,16]])})))()}}},v=f,g=(a("9bb1"),a("2877")),b=Object(g["a"])(v,r,n,!1,null,"4e7940cb",null);t["default"]=b.exports},e01a:function(e,t,a){"use strict";var r=a("23e7"),n=a("83ab"),s=a("da84"),i=a("5135"),c=a("861d"),o=a("9bf2").f,u=a("e893"),l=s.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};u(m,l);var p=m.prototype=l.prototype;p.constructor=m;var f=p.toString,v="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;o(p,"description",{configurable:!0,get:function(){var e=c(this)?this.valueOf():this,t=f.call(e);if(i(d,e))return"";var a=v?t.slice(7,-1):t.replace(g,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:m})}},f19b:function(e,t,a){"use strict";var r=a("9b49"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-12d0e554.e412e8e1.js.map