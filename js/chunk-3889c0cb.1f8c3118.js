(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3889c0cb"],{"5fd8":function(t,e,a){"use strict";var s=a("b0e1"),r=a.n(s);r.a},"671e":function(t,e,a){},6783:function(t,e,a){"use strict";a("a4d3"),a("e01a");var s=a("2fa3");e["a"]={getTweets:function(){return s["b"].get("/tweets")},createTweet:function(t){var e=t.description;return s["b"].post("/tweets",{description:e})},replyTweet:function(t){var e=t.tweetId,a=t.comment;return s["b"].post("/tweets/".concat(e,"/replies"),{comment:a})},getTweet:function(t){var e=t.tweetId;return s["b"].get("/tweets/".concat(e))},getTweetReplies:function(t){var e=t.tweetId;return s["b"].get("/tweets/".concat(e,"/replies"))},addLike:function(t){var e=t.tweetId;return s["b"].post("/tweets/".concat(e,"/like"),null)},deleteLike:function(t){var e=t.tweetId;return s["b"].post("/tweets/".concat(e,"/unlike"),null)}}},"8d93":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tweet-create-modal"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-box"},[a("div",{staticClass:"cancel-create"},[a("img",{staticClass:"cancel-icon",attrs:{src:"https://i.imgur.com/qd4MrVa.png",alt:"cancel"},on:{click:t.clickToClose}})]),a("div",{staticClass:"tweet-create-container"},[a("div",{staticClass:"profile-image"},[a("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(this.currentUserData.avatar),alt:""}})]),a("form",{staticClass:"tweet-input"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"tweet-input-content",attrs:{name:"tweet-input-area",id:"",cols:"30",rows:"10",placeholder:"有什麼新鮮事？"},domProps:{value:t.description},on:{keydown:t.autoTextAreaHeight,input:function(e){e.target.composing||(t.description=e.target.value)}}}),a("button",{staticClass:"tweet-create-btn",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._v(" 推文 ")])])])])])])},r=[],i=(a("a4d3"),a("e01a"),a("5530")),n=a("2f62"),c=a("2708"),o={mixins:[c["a"]],props:{initialDescription:{type:String,required:!0},currentUserData:{type:Object,default:function(){}}},computed:Object(i["a"])({},Object(n["b"])(["currentUser"])),data:function(){return{description:this.initialDescription}},methods:{clickToClose:function(){this.$emit("after-click-close-create")},handleSubmit:function(){var t=this.description;console.log(t),this.$emit("afterSubmit",t)},finishCreate:function(){this.$emit("after-click-close-create")},autoTextAreaHeight:function(t){t.currentTarget.scrollHeight>t.currentTarget.clientHeight&&(t.currentTarget.style.height=t.currentTarget.scrollHeight+"px")}}},u=o,l=(a("f19b"),a("2877")),d=Object(l["a"])(u,s,r,!1,null,"73aee90c",null);e["a"]=d.exports},"9b49":function(t,e,a){},b0e1:function(t,e,a){},e01a:function(t,e,a){"use strict";var s=a("23e7"),r=a("83ab"),i=a("da84"),n=a("5135"),c=a("861d"),o=a("9bf2").f,u=a("e893"),l=i.Symbol;if(r&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(m,l);var g=m.prototype=l.prototype;g.constructor=m;var f=g.toString,v="Symbol(test)"==String(l("test")),p=/^Symbol\((.*)\)[^)]+$/;o(g,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=f.call(t);if(n(d,t))return"";var a=v?e.slice(7,-1):e.replace(p,"$1");return""===a?void 0:a}}),s({global:!0,forced:!0},{Symbol:m})}},e3e2:function(t,e,a){"use strict";var s=a("671e"),r=a.n(s);r.a},e60d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Sidebar",{attrs:{"selected-page":t.selectedPage},on:{showCreateModal:t.showCreateModal}}),a("div",{staticClass:"online-users-part"},[a("div",{staticClass:"online-users-container"},[t._m(0),a("div",{staticClass:"online-user"},[a("router-link",{staticClass:"user-avatar-link",attrs:{to:"#"}},[a("div",{staticClass:"profile-image online-user-imag"},[a("img",{staticClass:"user-img",attrs:{src:"https://i.imgur.com/qRezTy6.pnge",alt:""}})])]),a("div",{staticClass:"online-user-info"},[a("router-link",{staticClass:"user-name-link",attrs:{to:"#"}},[a("div",{staticClass:"user-name"},[t._v("username")])]),a("div",{staticClass:"user-account"},[t._v("@user.account")])],1)],1),a("div",{staticClass:"online-user"},[a("router-link",{staticClass:"user-avatar-link",attrs:{to:"#"}},[a("div",{staticClass:"profile-image online-user-image"},[a("img",{staticClass:"user-img",attrs:{src:"https://i.imgur.com/qRezTy6.pnge",alt:""}})])]),a("div",{staticClass:"online-user-info"},[a("router-link",{staticClass:"user-name-link",attrs:{to:"#"}},[a("div",{staticClass:"user-name"},[t._v("username")])]),a("div",{staticClass:"user-account"},[t._v("@user.account")])],1)],1),a("div",{staticClass:"online-user"},[a("router-link",{staticClass:"user-avatar-link",attrs:{to:"#"}},[a("div",{staticClass:"profile-image online-user-imag"},[a("img",{staticClass:"user-img",attrs:{src:"https://i.imgur.com/qRezTy6.pnge",alt:""}})])]),a("div",{staticClass:"online-user-info"},[a("router-link",{staticClass:"user-name-link",attrs:{to:"#"}},[a("div",{staticClass:"user-name"},[t._v("username")])]),a("div",{staticClass:"user-account"},[t._v("@user.account")])],1)],1)])]),a("div",{staticClass:"chat-room-part"},[a("div",{staticClass:"chat-room-container"},[t._m(1),a("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"chat-content-container"},[a("div",{staticClass:"chat-content"},t._l(t.userMessageData,(function(t,e){return a("ChatMessage",{key:e,attrs:{user:t}})})),1)]),a("div",{staticClass:"chat-input-part"},[a("div",{staticClass:"input-container"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputMessage,expression:"inputMessage"}],staticClass:"message-input",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"輸入訊息..."},domProps:{value:t.inputMessage},on:{keydown:t.autoTextAreaHeight,input:function(e){e.target.composing||(t.inputMessage=e.target.value)}}}),a("button",{staticClass:"input-button",attrs:{type:"submit"}},[a("font-awesome-icon",{staticClass:"input",attrs:{icon:"paper-plane"},on:{click:t.sendMessage}})],1)])])])]),t.createModal?a("TweetCreateModal",{attrs:{"initial-description":t.description,currentUserData:t.currentUserData},on:{"after-click-close-create":t.closeCreateModal,afterSubmit:t.creatTweetFromModal}}):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-list-title"},[a("p",[t._v("上線使用者(0)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat-room-title"},[a("p",[t._v("公開聊天室")])])}],i=(a("b0c0"),a("96cf"),a("1da1")),n=a("5530"),c=a("5ea5"),o=a("8d93"),u=a("6783"),l=a("4cce"),d=a("2fa3"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isMyself?[a("div",{staticClass:"self-message"},[a("div",{staticClass:"self-content"},[a("div",{staticClass:"self-message-info"},[a("div",{staticClass:"self-message-container"},[a("div",{staticClass:"self-message-text"},[t._v(" "+t._s(t.user.msg.data.message)+" ")])]),a("div",{staticClass:"self-submit-time"},[t._v(" "+t._s(t._f("formateDate")(t.user.msg.data.createdAt))+" "+t._s(t._f("formateDateToTime")(t.user.msg.data.createdAt))+" ")])])])])]:[a("div",{staticClass:"other-message"},[a("div",{staticClass:"other-content"},[a("div",{staticClass:"profile-image other-image"},[a("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(t.user.msg.data.avatar),alt:""}})]),a("div",{staticClass:"other-message-info"},[a("div",{staticClass:"other-message-container"},[a("div",{staticClass:"other-message-text"},[t._v(" "+t._s(t.user.msg.data.message)+" ")])]),a("div",{staticClass:"other-submit-time"},[t._v(" "+t._s(t._f("formateDate")(t.user.msg.data.createdAt))+" "+t._s(t._f("formateDateToTime")(t.user.msg.data.createdAt))+" ")])])])])]],2)},g=[],f=a("2708"),v=a("2f62"),p={mixins:[f["a"],f["b"],f["c"]],props:{user:{type:Object,default:function(){}}},computed:Object(n["a"])(Object(n["a"])({},Object(v["b"])(["currentUser"])),{},{isMyself:function(){return this.user.msg.data.userId===this.currentUser.id}})},h=p,C=(a("e3e2"),a("2877")),b=Object(C["a"])(h,m,g,!1,null,"4457ef39",null),w=b.exports,k={components:{Sidebar:c["a"],TweetCreateModal:o["a"],ChatMessage:w},data:function(){return{createModal:!1,selectedPage:"",description:"",inputMessage:"",userMessageData:[],currentUserData:{id:"",name:"",account:"",avatar:""},data:{id:"",name:"",message:"",createdAt:""}}},computed:Object(n["a"])({},Object(v["b"])(["currentUser"])),created:function(){var t=this;this.fetchCurrentUserData(this.currentUser.id),this.$socket.on("history",(function(t){console.log("124"),console.log("DATA",t)})),this.$socket.on("chat message",(function(e){t.messagePush(e)}))},methods:{showCreateModal:function(){this.createModal=!0},closeCreateModal:function(){this.createModal=!1},CreateFinish:function(){this.$router.push({name:"tweets-home"})},fetchCurrentUserData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,i,n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,l["a"].getUser({userId:t});case 2:s=a.sent,r=s.data,i=r.account,n=r.name,c=r.avatar,e.currentUserData.account=i,e.currentUserData.name=n,e.currentUserData.avatar=c;case 8:case"end":return a.stop()}}),a)})))()},creatTweetFromModal:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,0!==t.length){a.next=4;break}return d["a"].fire({icon:"warning",title:"請輸入推文內容"}),a.abrupt("return");case 4:if(!(t.length>140)){a.next=7;break}return d["a"].fire({icon:"warning",title:"推文字數限制140字以內，請減少輸入的字數"}),a.abrupt("return");case 7:return a.next=9,u["a"].createTweet({description:t});case 9:if(s=a.sent,r=s.data,"error"!==r.status){a.next=13;break}throw new Error(r.message);case 13:e.CreateFinish(),a.next=20;break;case 16:a.prev=16,a.t0=a["catch"](0),console.log(a.t0),d["a"].fire({icon:"error",title:"無法新增推文，請稍後再試看"});case 20:case"end":return a.stop()}}),a,null,[[0,16]])})))()},sendMessage:function(){if(this.inputMessage<1)d["a"].fire({icon:"warning",title:"還未填入訊息內容喔！"});else{var t={userId:this.currentUser.id,message:this.inputMessage,avatar:this.currentUser.avatar,createdAt:new Date};this.$socket.emit("chat message",{data:t}),this.inputMessage=""}},messagePush:function(t){this.userMessageData.push(t)},autoTextAreaHeight:function(t){t.currentTarget.scrollHeight>t.currentTarget.clientHeight&&(t.currentTarget.style.height=t.currentTarget.scrollHeight+"px")}}},_=k,T=(a("5fd8"),Object(C["a"])(_,s,r,!1,null,"2a7473cd",null));e["default"]=T.exports},f19b:function(t,e,a){"use strict";var s=a("9b49"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-3889c0cb.1f8c3118.js.map