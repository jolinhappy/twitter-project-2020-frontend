(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c3033ed"],{"220b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tweets-list"},[t._l(t.tweets,(function(e){return s("div",{key:e.id,staticClass:"tweet-list-container"},[s("div",{staticClass:"profile-image"},[s("router-link",{attrs:{to:{name:"user-profile",params:{id:e.User.id}}}},[s("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(e.User.avatar),alt:""}})])],1),s("div",{staticClass:"tweet"},[s("div",{staticClass:"tweet-info"},[s("router-link",{staticClass:"user-name-link",attrs:{to:{name:"user-profile",params:{id:e.User.id}}}},[s("div",{staticClass:"user-name"},[t._v(t._s(t._f("maxSlice")(e.User.name)))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.User.name.length<45,expression:"tweet.User.name.length < 45"}],staticClass:"user-account"},[t._v(" @"+t._s(e.User.account)+" ")]),s("div",{staticClass:"create-time"},[t._v("．"+t._s(t._f("fromNow")(e.createdAt)))])],1),"main"!==t.pageMode?s("div",{staticClass:"tag-user"},[s("div",{staticClass:"tag-text"},[t._v("回覆")]),s("a",{staticClass:"tag-user-acount",attrs:{href:"#"}},[t._v("@"+t._s(t.mainTweet.User.account))])]):t._e(),s("router-link",{staticClass:"tweet-content",attrs:{to:{name:"tweet",params:{id:e.id}}}},[t._v(" "+t._s(e.description||e.comment)+" ")]),s("div",{staticClass:"tweet-action"},[s("div",{staticClass:"tweet-reply",on:{click:function(s){return t.showReplyModal(e)}}},[s("img",{staticClass:"reply",attrs:{src:"https://i.imgur.com/SaR8cz3.png",alt:"reply"}}),s("span",{staticClass:"reply-count"},[t._v(t._s(e.Replies?e.Replies.length:"0"))])]),e.isLiked?s("div",{staticClass:"tweet-like"},[s("img",{staticClass:"like",attrs:{src:"https://i.imgur.com/8wXFVUF.png",alt:"like"},on:{click:function(s){return t.deleteLike({id:e.id,tweet:e})}}}),s("span",{staticClass:"isLike-count"},[t._v(t._s(e.Likes?e.Likes.length:"0"))])]):s("div",{staticClass:"tweet-like"},[s("img",{staticClass:"like isliked",attrs:{src:"https://i.imgur.com/qs9Pe3N.png",alt:"like"},on:{click:function(s){return t.addLike({id:e.id,tweet:e})}}}),s("span",{staticClass:"like-count"},[t._v(t._s(e.Likes?e.Likes.length:"0"))])])])],1)])})),0===t.initialTweets.length?s("div",{staticClass:"no-data-container"},[s("div",{staticClass:"no-data"},[t._v("尚無相關推文...")])]):t._e()],2)},i=[],r=(s("fb6a"),s("a434"),s("96cf"),s("1da1")),n=s("5530"),c=s("2708"),o=s("6783"),l=s("2fa3"),u={mixins:[c["d"],c["a"]],props:{pageMode:{type:String,required:!0},initialTweets:{type:Array,required:!0},mainTweet:{type:Object,default:function(){return{}}}},data:function(){return{tweets:this.initialTweets,currentUser:{id:-1,name:" ",email:"",avatar:""},isAuthenticated:!1,tweet:{}}},watch:{initialTweets:function(t){this.tweets=Object(n["a"])(Object(n["a"])({},this.tweets),t)}},methods:{showReplyModal:function(t){console.log(t),this.tweet=t,this.$emit("showReplyModal",this.tweet)},addLike:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,i,r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.id,i=t.tweet,s.prev=1,s.next=4,o["a"].addLike({tweetId:a});case 4:if(r=s.sent,n=r.data,"success"===n.status){s.next=8;break}throw new Error(n.message);case 8:i.isLiked=!0,console.log(i),i.Likes.push({UserId:e.currentUser}),l["a"].fire({icon:"success",title:"對方已經收到您的讚囉！"}),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](1),console.log(s.t0),l["a"].fire({icon:"error",title:"無法按讚，請稍後再試"});case 18:case"end":return s.stop()}}),s,null,[[1,14]])})))()},deleteLike:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.id,a=t.tweet,e.prev=1,e.next=4,o["a"].deleteLike({tweetId:s});case 4:if(i=e.sent,r=i.data,"success"===r.status){e.next=8;break}throw new Error(r.message);case 8:l["a"].fire({icon:"success",title:"成功取消按讚！"}),a.isLiked=!1,a.Likes.splice(0,1),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0),l["a"].fire({icon:"error",title:"無法取消按讚，請稍後再試"});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))()}},filters:{maxSlice:function(t){return t.length>45?t.slice(0,45)+"...":t}}},d=u,p=(s("42d2"),s("2877")),f=Object(p["a"])(d,a,i,!1,null,"e3a306dc",null);e["a"]=f.exports},2375:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"wraper"},[s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div")])])}],r=(s("616f"),s("2877")),n={},c=Object(r["a"])(n,a,i,!1,null,"4548c6d4",null);e["a"]=c.exports},"354a":function(t,e,s){"use strict";var a=s("b218"),i=s.n(a);i.a},"385b":function(t,e,s){},"42d2":function(t,e,s){"use strict";var a=s("385b"),i=s.n(a);i.a},"50ff":function(t,e,s){},"616f":function(t,e,s){"use strict";var a=s("50ff"),i=s.n(a);i.a},6783:function(t,e,s){"use strict";s("a4d3"),s("e01a");var a=s("2fa3");e["a"]={getTweets:function(){return a["b"].get("/tweets")},createTweet:function(t){var e=t.description;return a["b"].post("/tweets",{description:e})},replyTweet:function(t){var e=t.tweetId,s=t.comment;return a["b"].post("/tweets/".concat(e,"/replies"),{comment:s})},getTweet:function(t){var e=t.tweetId;return a["b"].get("/tweets/".concat(e))},getTweetReplies:function(t){var e=t.tweetId;return a["b"].get("/tweets/".concat(e,"/replies"))},addLike:function(t){var e=t.tweetId;return a["b"].post("/tweets/".concat(e,"/like"),null)},deleteLike:function(t){var e=t.tweetId;return a["b"].post("/tweets/".concat(e,"/unlike"),null)}}},"811a":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tweet-reply-modal"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-box"},[s("div",{staticClass:"cancel-create"},[s("img",{staticClass:"cancel-icon",attrs:{src:"https://i.imgur.com/qd4MrVa.png",alt:"cancel"},on:{click:t.clickToClose}})]),s("div",{staticClass:"reply-section"},[s("div",{staticClass:"user-tweet-container"},[s("div",{staticClass:"profile-image"},[s("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(t.tweet.User.avatar),alt:""}}),t._m(0)]),s("div",{staticClass:"tweet-part"},[s("div",{staticClass:"tweet-info"},[s("div",{staticClass:"user-name"},[t._v(t._s(t.tweet.User.name))]),s("div",{staticClass:"user-account"},[t._v(t._s(t.tweet.User.account))]),s("div",{staticClass:"create-time"},[t._v("．"+t._s(t._f("fromNow")(t.tweet.createdAt)))])]),s("div",{staticClass:"tweet-content"},[t._v(" "+t._s(t.tweet.description)+" ")]),s("div",{staticClass:"reply-for"},[s("p",[t._v("回覆")]),s("router-link",{staticClass:"reply-user-account",attrs:{to:{name:"user-profile",params:{id:t.tweet.User.id}}}},[t._v("@"+t._s(t.tweet.User.account))])],1)])]),s("div",{staticClass:"tweet-reply-container"},[s("div",{staticClass:"profile-image-reply"},[s("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(t.currentUser.avatar),alt:""}})]),s("form",{staticClass:"tweet-input",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleReplySubmit(e)}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyComment,expression:"replyComment"}],staticClass:"tweet-input-content",attrs:{name:"tweet-input-area",id:"",cols:"30",rows:"10",placeholder:"推你的回覆"},domProps:{value:t.replyComment},on:{keydown:t.autoTextAreaHeight,input:function(e){e.target.composing||(t.replyComment=e.target.value)}}}),s("button",{staticClass:"tweet-reply-btn",attrs:{type:"submit"}},[t._v("回覆")])])])])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"line-part"},[s("div",{staticClass:"line"})])}],r=s("5530"),n=s("2708"),c=s("2f62"),o=s("2fa3"),l={mixins:[n["d"],n["a"]],props:{tweet:{type:Object,required:!0},currentUserData:{type:Object,required:!0}},computed:Object(r["a"])({},Object(c["b"])(["currentUser"])),data:function(){return{replyComment:""}},methods:{handleReplySubmit:function(){this.replyComment.length>140?o["a"].fire({icon:"warning",title:"哎呀！回覆只能輸入140個字喔！"}):this.$emit("after-create-reply",{tweetId:this.tweet.id,comment:this.replyComment})},clickToClose:function(){this.$emit("after-click-close-reply")},autoTextAreaHeight:function(t){t.currentTarget.scrollHeight>t.currentTarget.clientHeight&&(t.currentTarget.style.height=t.currentTarget.scrollHeight+"px")}}},u=l,d=(s("bbf8"),s("2877")),p=Object(d["a"])(u,a,i,!1,null,"1826403a",null);e["a"]=p.exports},"8d93":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tweet-create-modal"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-box"},[s("div",{staticClass:"cancel-create"},[s("img",{staticClass:"cancel-icon",attrs:{src:"https://i.imgur.com/qd4MrVa.png",alt:"cancel"},on:{click:t.clickToClose}})]),s("div",{staticClass:"tweet-create-container"},[s("div",{staticClass:"profile-image"},[s("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(this.currentUserData.avatar),alt:""}})]),s("form",{staticClass:"tweet-input"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"tweet-input-content",attrs:{name:"tweet-input-area",id:"",cols:"30",rows:"10",placeholder:"有什麼新鮮事？"},domProps:{value:t.description},on:{keydown:t.autoTextAreaHeight,input:function(e){e.target.composing||(t.description=e.target.value)}}}),s("button",{staticClass:"tweet-create-btn",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._v(" 推文 ")])])])])])])},i=[],r=(s("a4d3"),s("e01a"),s("5530")),n=s("2f62"),c=s("2708"),o={mixins:[c["a"]],props:{initialDescription:{type:String,required:!0},currentUserData:{type:Object,default:function(){}}},computed:Object(r["a"])({},Object(n["b"])(["currentUser"])),data:function(){return{description:this.initialDescription}},methods:{clickToClose:function(){this.$emit("after-click-close-create")},handleSubmit:function(){var t=this.description;console.log(t),this.$emit("afterSubmit",t)},finishCreate:function(){this.$emit("after-click-close-create")},autoTextAreaHeight:function(t){t.currentTarget.scrollHeight>t.currentTarget.clientHeight&&(t.currentTarget.style.height=t.currentTarget.scrollHeight+"px")}}},l=o,u=(s("f19b"),s("2877")),d=Object(u["a"])(l,a,i,!1,null,"73aee90c",null);e["a"]=d.exports},"9b49":function(t,e,s){},a434:function(t,e,s){"use strict";var a=s("23e7"),i=s("23cb"),r=s("a691"),n=s("50c4"),c=s("7b0b"),o=s("65f0"),l=s("8418"),u=s("1dde"),d=s("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,v=Math.min,w=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!f},{splice:function(t,e){var s,a,u,d,p,f,h=c(this),C=n(h.length),b=i(t,C),k=arguments.length;if(0===k?s=a=0:1===k?(s=0,a=C-b):(s=k-2,a=v(m(r(e),0),C-b)),C+s-a>w)throw TypeError(g);for(u=o(h,a),d=0;d<a;d++)p=b+d,p in h&&l(u,d,h[p]);if(u.length=a,s<a){for(d=b;d<C-a;d++)p=d+a,f=d+s,p in h?h[f]=h[p]:delete h[f];for(d=C;d>C-a+s;d--)delete h[d-1]}else if(s>a)for(d=C-a;d>b;d--)p=d+a-1,f=d+s-1,p in h?h[f]=h[p]:delete h[f];for(d=0;d<s;d++)h[d+b]=arguments[d+2];return h.length=C-a+s,u}})},b218:function(t,e,s){},bbf8:function(t,e,s){"use strict";var a=s("de61"),i=s.n(a);i.a},c553:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"follow-top-container"},[t._m(0),s("div",{staticClass:"follow-users-container"},t._l(t.topUsers,(function(e){return s("div",{key:e.key,staticClass:"follow-top-user"},[s("router-link",{staticClass:"user-avatar-link",attrs:{to:{name:"user-profile",params:{id:e.id}}}},[s("div",{staticClass:"profile-image top-user-image"},[s("img",{staticClass:"user-img top-user",attrs:{src:t._f("emptyImage")(e.avatar),alt:""}})])]),s("div",{staticClass:"top-user-info"},[s("router-link",{staticClass:"user-name-link",attrs:{to:{name:"user-profile",params:{id:e.id}}}},[s("div",{staticClass:"user-name"},[t._v(t._s(e.name))])]),s("div",{staticClass:"user-account"},[t._v("@"+t._s(e.account))])],1),s("div",{staticClass:"follow-btn"},[e.isFollowed?s("button",{staticClass:"followed",attrs:{type:"button",name:e.id},on:{click:function(s){return t.deleteFollow(e.id)}}},[t._v(" 正在跟隨 ")]):s("button",{staticClass:"follow",attrs:{type:"button",name:"id"},on:{click:function(s){return t.addFollow(e.id)}}},[t._v(" 跟隨 ")])])],1)})),0),t._m(1)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"follow-top-title"},[s("p",[t._v("跟隨誰")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"more"},[s("a",{staticClass:"readMore",attrs:{href:"#"}},[t._v("顯示更多")])])}],r=(s("d81d"),s("96cf"),s("1da1")),n=s("4cce"),c=s("2fa3"),o=s("2708"),l={mixins:[o["a"]],props:{initialIsFollowed:{type:Boolean,required:!0}},data:function(){return{topUsers:[],isFollowed:this.initialIsFollowed}},watch:{initialIsFollowed:function(t){this.isFollowed=t}},created:function(){this.fetchTopUsers()},methods:{fetchTopUsers:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n["a"].getTopUsers();case 3:s=e.sent,a=s.data,t.topUsers=a,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),c["a"].fire({icon:"error",title:"無法取得人氣使用者名單"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},addFollow:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,n["a"].addFollow({id:t});case 3:if(a=s.sent,i=a.data,"success"===i.status){s.next=7;break}throw new Error(i.message);case 7:c["a"].fire({icon:"success",title:"跟隨成功"}),e.topUsers.map((function(s){return s.id===t&&(s.isFollowed=!0,e.isFollowed=!0),s})),s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),c["a"].fire({icon:"error",title:"無法追蹤，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()},deleteFollow:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,n["a"].deleteFollow({followingId:t});case 3:if(a=s.sent,i=a.data,"success"===i.status){s.next=7;break}throw new Error(i.message);case 7:c["a"].fire({icon:"success",title:"成功取消跟隨"}),e.topUsers.map((function(s){return s.id===t&&(s.isFollowed=!1,e.isFollowed=!1),s})),s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),c["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()}}},u=l,d=(s("354a"),s("2877")),p=Object(d["a"])(u,a,i,!1,null,"3c8ffa50",null);e["a"]=p.exports},d81d:function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").map,r=s("1dde"),n=s("ae40"),c=r("map"),o=n("map");a({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},de61:function(t,e,s){},e01a:function(t,e,s){"use strict";var a=s("23e7"),i=s("83ab"),r=s("da84"),n=s("5135"),c=s("861d"),o=s("9bf2").f,l=s("e893"),u=r.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(p,u);var f=p.prototype=u.prototype;f.constructor=p;var m=f.toString,v="Symbol(test)"==String(u("test")),w=/^Symbol\((.*)\)[^)]+$/;o(f,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=m.call(t);if(n(d,t))return"";var s=v?e.slice(7,-1):e.replace(w,"$1");return""===s?void 0:s}}),a({global:!0,forced:!0},{Symbol:p})}},f19b:function(t,e,s){"use strict";var a=s("9b49"),i=s.n(a);i.a},fb6a:function(t,e,s){"use strict";var a=s("23e7"),i=s("861d"),r=s("e8b5"),n=s("23cb"),c=s("50c4"),o=s("fc6a"),l=s("8418"),u=s("b622"),d=s("1dde"),p=s("ae40"),f=d("slice"),m=p("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),w=[].slice,g=Math.max;a({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var s,a,u,d=o(this),p=c(d.length),f=n(t,p),m=n(void 0===e?p:e,p);if(r(d)&&(s=d.constructor,"function"!=typeof s||s!==Array&&!r(s.prototype)?i(s)&&(s=s[v],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return w.call(d,f,m);for(a=new(void 0===s?Array:s)(g(m-f,0)),u=0;f<m;f++,u++)f in d&&l(a,u,d[f]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-3c3033ed.1a1da136.js.map